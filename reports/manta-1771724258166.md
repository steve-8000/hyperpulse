# Manta 운영 리포트

- 생성 시각: 2026-02-22T01:37:38.166Z
- RSS: v4.7.3-1: Bump spec version (#1362)
- 비교 기준(Base): 5c17cfab74ea83f0f5e65b46c9c7437c933c5e65
- 최신 커밋(Head): 993030599ecd06b578946adab4f4172d098643ad

## 한줄 요약
이번 릴리즈는 주로 런타임 스펙 버전(Bump spec version)과 테스트 인프라(Chopsticks)를 위한 설정 파일 추가, 그리고 파라체인 스테이킹 모듈에 새로운 Origin 타입을 도입한 점이 핵심이다. 스펙 버전 업그레이드는 노드가 새 런타임을 로딩할 때 재인덱싱이 필요하며, 이는 아카이브 노드와 RPC 인터페이스에 미묘한 영향을 줄 수 있다. 또한, `pallet_parachain_staking`에 추가된 `RemoveCollatorOrigin` 필드가 새로 도입되었으나, 이는 외부 API에 직접적인 변화를 주지 않는다. 주요 변경사항은 런타임 업그레이드 프로세스와 테스트 인프라에 집중된다.

## 운영자 중요 체크
- 외부 API 엔드포인트/버전 관련 변경 단서가 감지되었습니다.
- 아카이브 노드 운영(보관/색인/동기화) 관련 변경 단서가 감지되었습니다.
- 노드 설정값/프로토콜 플래그 관련 변경 단서가 감지되었습니다.

## 주요 변경점
- 주요 변경점 없음

## RPC/API 영향
- 해당 사항 없음

## 아카이브 노드 영향
- 스펙 버전이 바뀜 경우, 아카이브 노드는 재인덱싱을 수행해야 한다. 현재 스펙 업그레이드가 저장 포맷에 변화를 주지 않으므로, 재시작 시 별도 추가 조치가 필요 없다.
- `RemoveCollatorOrigin` 필드가 새로 도입되었으나, 이는 내부 로직에만 영향을 주며 RPC엔드포인트에는 직접적인 영향이 없다.

## 운영 액션 아이템
- 1. `chop/.env` 파일에 POLKADOT_BLOCK_NUMBER, MANTA_BLOCK_NUMBER 값을 설정한다.
- 2. `chop/manta.yml`과 `chop/polkadot.yml`을 로컬에 복사해 환경설정한다.
- 3. `npx @acala-network/chopsticks@latest xcm --r=polkadot.yml --p=manta.yml` 으로 두 체인(Polkadot, Manta) 모두 실행한다.
- 4. `chop/README.md`에 안내된 순서대로 런타임 업그레이드(권한 승인 → enact)를 수행한다.
- 5. `tests/advance-blocks.ts` 스크립트를 실행해 블록이 정상적으로 진행되는지 확인한다.
- 6. 노드가 재시작되면, `spec_version`이 새로 바뀜지 확인하고, 인덱싱이 정상적으로 끝났는지 모니터링한다.

## 마이그레이션 체크리스트
- 스펙 버전이 바뀜 경우, `spec_version`을 확인하고 재인덱싱 여부를 검증한다.
- `chopsticks` 테스트가 정상 동작하는지, `tests/advance-blocks.ts`를 통해 블록 진행을 확인한다.
- 새로 추가된 `RemoveCollatorOrigin` 필드가 실제 로직에 반영되는지 테스트한다.
- RPC 엔드포인트(예: `remove_collator`)가 정상 동작하는지 테스트한다.
- 아카이브 노드 재시작 시 인덱싱이 정상적으로 끝났는지 모니터링한다.

## 위험/주의 사항
- 스펙 버전이 바뀜 경우, 기존 노드가 새 스펙에 맞지 않으면 블록체인이 재동작을 못 할 수 있다. 특히, 아카이브 노드는 스펙 버전 차이를 인식하고 재인덱싱을 수행해야 한다.
- `RemoveCollatorOrigin` 타입이 추가되었으나, 이 필드가 실제로 사용되는지 여부를 확인해야 한다. 만약 새 Origin이 적용되면, 기존 RPC 호출에서 `remove_collator` 같은 엔드포인트가 동작하지 않을 수 있다.
- Chopsticks를 이용한 런타임 업그레이드 스크립트가 정상 동작하지 않을 경우, 테스트넷에서 런타임이 비정상적으로 종료될 위험이 있다.

## 근거(Evidence)
- 근거 데이터 없음

## 운영 메모
- 스펙 버전이 바뀜 경우, 노드가 새 런타임을 로딩할 때 재인덱싱이 필요하다. 이는 아카이브 노드가 재시작 시 전체 스토리지를 다시 읽어야 함을 의미한다.
- `chopsticks`를 이용한 런타임 업그레이드 프로세스는 테스트넷에서 먼저 시도해 두어야 한다. `tests/advance-blocks.ts` 스크립트가 정상 동작하는지 확인해야 한다.
- 새 Origin 타입이 추가되었으나, 현재 RPC엔드포인트에 직접적인 영향은 없으나, 내부 로직이 바뀜 경우 `remove_collator` 같은 호출이 실패할 수 있다.

## 원문 커밋 내용
### Commit Log
```text
99303059 Bump spec version (#1362)
67e94731 Force collator offline (#1361)
fddc081f Use chopsticks for runtime upgrade testing (#1356)
```

