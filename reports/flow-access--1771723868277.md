# Flow(Access) 운영 리포트

- 생성 시각: 2026-02-22T01:31:08.277Z
- RSS: v0.46.1-experimental-indexer.8
- 비교 기준(Base): 2db95a14348a45a1ce7d2c119be2bc42718cfd80
- 최신 커밋(Head): 1651c1aa13e6d0ddd0fb569b0296963d465bd475

## 한줄 요약
이 릴리즈는 Flow 노드에 신규 토큰 전송(FT, NFT) 조회 API를 추가하고 기존 트랜잭션 조회 로직을 개선한 버전이다.  API 인터페이스에 두 개의 새 메서드(`GetAccountFungibleTokenTransfers`, `GetAccountNonFungibleTokenTransfers`)가 도입되었으며, 백엔과 인덱서에 토큰 전송 이벤트를 저장·조회하는 로직이 추가되었다.  이로 인해 인덱서 재구축, 스토리지 구조 변경, RPC 엔드포인트 확장 등 여러 레이어에서 변동이 발생한다.

## 운영자 중요 체크
- 외부 API 엔드포인트/버전 관련 변경 단서가 감지되었습니다.
- 아카이브 노드 운영(보관/색인/동기화) 관련 변경 단서가 감지되었습니다.
- 노드 설정값/프로토콜 플래그 관련 변경 단서가 감지되었습니다.

## 주요 변경점
- access/backends/extended/api.go에 두 개의 새 메서드 추가
- backend_account_transfers.go, backend_account_transactions.go 등 인덱서 로직 변경
- storage/indexes에 FT/NFT 전송 인덱스 추가
- engine/access/rest/experimental/routes에 새 엔드포인트 도입

## RPC/API 영향
- "GetAccountFungibleTokenTransfers": GET /account_ft_transfers?address={addr}&limit=&cursor=&filter=&expandResults=&encodingVersion=...
- "GetAccountNonFungibleTokenTransfers": GET /account_nft_transfers?address={addr}&limit=&cursor=&filter=&expandResults=&encodingVersion=...

## 아카이브 노드 영향
- 인덱서 재구축 시 인덱스 파일 크기가 증가한다. 1) FT 전송 이벤트를 별도 저장하므로 디스크 사용량이 증가한다. 2) 인덱서가 오래 걸리면 노드 재시작 시 다운타임이 늘어난다. 3) 인덱서가 아직 완전 테스트되지 않은 `experimental` 라우팅이므로, 아카이브 노드가 새 API를 지원하려면 `--experimental` 플래그를 활성화해야 한다.

## 운영 액션 아이템
- 1. 인덱서 재구축: `go run ./cmd/access/...` 로 인덱스 빌드 후 재배포
- 2. 스토리지 인터페이스 구현: `storage.FungibleTokenTransfersBootstrapper`와 `NonFungibleTokenTransfersBootstrapper`를 구현
- 3. 노드 설정 파일에 `EnableExperimentalIndexer: true` 옵션 추가(필요 시)
- 4. API 라우팅에 `routes_experimental.go`를 활성화

## 마이그레이션 체크리스트
- 1. 인덱서 재구축(FT/NFT 전송 이벤트 포함)
- 2. 새 API 엔드포인트가 `experimental` 라우팅에 추가되었는지 확인
- 3. 스토리지 인터페이스 구현 여부 검증
- 4. 테스트 커버리지를 통해 정상 동작 확인
- 5. RPC/JSON‑RPC 문서 업데이트

## 위험/주의 사항
- 위험 요소 없음

## 근거(Evidence)
- commit 1651c1aa13: "use event slice instead of map"
- commit 0bb545104a: "update indexes storage to return ErrAlreadyExists for all already processed blocks"
- commit 144317c87d: "improve error handling in the backend"
- commit 7cc18b3989: merge pull request #8381 from onflow/peter/embedded-indexer
- commit 5f377af77b4: merge pull request #8420 from onflow/jord/tag-lockctx
- commit 2f7c74ed4: merge branch 'peter/account-transactions-api' into peter/account-transfers
- commit 3652635fb5: [Access] Add experimental account transfers rest API

## 운영 메모
- 추가 메모 없음

## 원문 커밋 내용
### Commit Log
```text
1651c1aa13 use event slice instead of map
0277bc5492 add missing indexer test utils
0bb545104a update indexes storage to return ErrAlreadyExists for all already processed blocks
75aa715584 cleanup indexer tests
65cd95ca93 switch storage interfaces to use ByAddress
144317c87d improve error handling in the backend
54386a7a49 improve rest api testing
a4cfc55ea8 fix test errors
ebd0eef5eb Merge branch 'peter/account-transactions-api' into peter/account-transfers
eaf927d814 refactor and expand testing
7cc18b3989 Merge branch 'master' into peter/account-transactions-api
fbb308ec64 Merge pull request #8381 from onflow/peter/embedded-indexer
62ad26fee4 move exception handling first in indexNextHeights
8c4cb7baa0 Merge pull request #8418 from onflow/fxamacker/add-evm-wrapper-func
70b114521c Merge pull request #8422 from onflow/tim/run-go1.26-fix
6737724ed4 go fix: remove obsolete +build directives
c5a0b65000 Use geth crypto funcs to encode EVM call signature
f377af77b4 Merge pull request #8420 from onflow/jord/tag-lockctx
f11a22141b pin tagged version of lockctx
f4dfcdf635 Return raw result data if evm call fails
6fc4a4051f Remove a commented out line and fix existing nit
68fe55b2d3 Merge branch 'master' into fxamacker/add-evm-wrapper-func
2f7c74ed4b Merge branch 'peter/account-transactions-api' into peter/account-transfers
460d20bcfd Merge branch 'peter/account-transactions-api' into peter/account-transfers
3652635fb5 [Access] Add experimental account transfers rest API
aa36586ae0 Update test fixture
646eca3d27 Lint
f7f9e7b1e8 Add sanity check in encodeABIWithSigAndArgs
c7fb9df471 Lint
16120e2f7e Add 3 new EVM functions to optimize call and dryCall
```

