# Pocket 운영 리포트

- 생성 시각: 2026-02-22T01:41:06.881Z
- RSS: RC-0.12.0
- 비교 기준(Base): 6dafb22f2a5f1032ce11677da18318fa5babbbf3
- 최신 커밋(Head): 60ce9a128dbbf46258fe9255177b767901113dff

## 한줄 요약
Pocket Core 0.12.0 릴리즈는 버전업그에 따라 RPC/JSON‑RPC 인터페이스와 Docker 이미지, 그리고 데이터 디렉터리 관리에 대한 변경이 포함되어 있습니다. 주요 포인트는 다음과 같습니다.

1. **Docker & Entrypoint** – `change_datadir_ownership_to_app.sh` 스크립트와 함께 Dockerfile이 수정되어 컨테이너가 `app` 사용자로 실행됩니다. 이는 데이터 디렉터리 권한 문제를 해결하지만, 기존 컨테이너에서 `root` 사용자로 실행되던 경우 권한 이슈가 발생할 수 있습니다.
2. **CLI** – `appTransferCmd`에 `--pwd` 옵션이 추가되었습니다. 이는 비밀리터(비밀번호) 입력을 우회해 주는 기능으로, 스크립트에서 비밀리터를 자동 입력하도록 변경되었습니다.
3. **AAT** – `create-aat` 명령어가 문서화되었으며, 버전이 고정(`0.0.1`)된 토큰을 생성합니다.
4. **Deterministic JSON** – `types/utils.go`에서 파라미터 직렬화가 결정적이 되도록 변경되었습니다. 이는 RPC 응답의 일관성을 보장하지만, 기존 클라이언트가 직렬화 방식을 기대하고 있다면 호환성 이슈가 발생할 수 있습니다.
5. **Config & Environment** – `POCKET_CORE_DATADIR`, `POCKET_CORE_KEY`, `POCKET_CORE_PASSPHRASE` 환경변수에 대한 처리 로직이 추가되었습니다. 이는 컨테이너 실행 시 경로와 키 관리에 영향을 미칩니다.

## 운영자 중요 체크
- 아카이브 노드 운영(보관/색인/동기화) 관련 변경 단서가 감지되었습니다.
- 노드 설정값/프로토콜 플래그 관련 변경 단서가 감지되었습니다.

## 주요 변경점
- 1. Dockerfile에 `change_datadir_ownership_to_app.sh` 추가 및 `USER app` 설정
- 2. Entrypoint 스크립트에서 `--datadir` 경로 검증 로직 추가
- 3. CLI에 `appTransferCmd --pwd` 옵션 추가
- 4. Deterministic JSON 직렬화 적용(파라미터 직렬화 순서 고정)
- 5. AAT 명령어 문서 업데이트 및 버전 고정

## RPC/API 영향
- 해당 사항 없음

## 아카이브 노드 영향
- - 데이터 디렉터리 경로가 변경되면 아카이브 노드에서 파일 접근 이슈 발생 가능
- - Deterministic JSON 직렬화로 인한 RPC 응답 포맵이 바뀔 수 있으므로, 아카이브 노드가 최신 버전으로 재시작해야 함

## 운영 액션 아이템
- 해당 사항 없음

## 마이그레이션 체크리스트
- 해당 사항 없음

## 위험/주의 사항
- 1. Docker 이미지 빌드 시 `app` 사용자 권한이 없으면 컨테이너 실행 실패
- 2. 데이터 디렉터리 경로가 변경되면 기존 컨테이너에서 파일 접근 이슈 발생
- 3. Deterministic JSON 직렬화가 기존 RPC 응답 포맵에 영향을 줄 수 있음(예: 파라미터 직렬화 순서)
- 4. AAT 버전 고정으로 인한 호환성 이슈(기존 클라이언트가 다른 버전 토큰을 기대할 경우)

## 근거(Evidence)
- "app/app.go: AppVersion = \"RC-0.12.0\" (commit 60ce9a12)"
- "app/cmd/cli/app.go: 추가된 --pwd 옵션 및 문서화 (commit 60ce9a12)"
- ".github/workflows/Dockerfile: USER app 설정 및 change_datadir_ownership_to_app.sh 추가 (commit 60ce9a12)"
- ".github/workflows/entrypoint.sh: --datadir 경로 검증 로직 추가 (commit 60ce9a12)"
- "types/utils.go: Deterministic JSON 직렬화 적용 (commit 60ce9a12)"
- "x/pocketcore/types/aat.go: AAT 버전 고정 (commit 60ce9a12)"

## 운영 메모
- 추가 메모 없음

## 원문 커밋 내용
### Commit Log
```text
60ce9a12 Version bump to RC-0.12.0 (#1615)
80036580 Add a link to #1617 in the codebase (#1619)
472862af Add a link to pocket-core-doc (#1618)
003a9593 Parameter JSON serialization must be deterministic (#1614)
7f936ff7 Add pwd flags to appTransferCmd (#1608)
a23210f5 Typo in main README
33b28c1e Docker Image enhancement and better CLI support. (#1603)
21d70e91 Added a unit test to verify the dao account name
93592fab [Docs] AAT related comments & documentation improvements (#1598)
57ab4c7e Fix Uncompressed Inline tar cmd (#1597)
```

