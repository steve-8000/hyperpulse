# Aptos 운영 리포트

- 생성 시각: 2026-02-22T01:18:18.750Z
- RSS: Aptos CLI Release v8.1.0
- 비교 기준(Base): e2683170c2d7121ebe6174793dfc2f850992ca7b
- 최신 커밋(Head): e4c00ea67e1a33fc9e77a9a80614a778b58fa5b0

## 한줄 요약
Aptos v8.1.0 릴리즈는 주로 **암호화된 트랜잭션** 지원과 저장소 최적화, 그리고 API/JSON‑RPC 인터페이스에 대한 소규한 변경을 포함한다. 주요 포인트는 다음과 같다.
1. **Encrypted Transaction** 기능이 추가되어, 트랜잭션에 암호화 헤더와 키가 포함된다. 2. `LedgerState` 및 RocksDB 관련 버그 수정으로 인한 저장소 성능이 개선된다. 3. `spec.json`/`spec.yaml` 과 테스트 케이스가 대폭 확장되었으며, 이는 API 스펙에 새로운 필드와 엔드포인트가 추가됐음을 의미한다. 4. `Cargo.lock` 과 의존성 버전이 업데이트되었고, 일부 패키지(예: `aptos-move`, `aptos-indexer`)가 새 버전으로 교체되었다.

이 릴리즈는 운영 노드에 대한 직접적인 영향은 적지만, 암호화 트랜잭션과 저장소 최적화가 포함된 만큼 운영자는 주의 변경 사항을 검토하고 필요 시 조치를 취해야 한다.



## 운영자 중요 체크
- 외부 API 엔드포인트/버전 관련 변경 단서가 감지되었습니다.
- 아카이브 노드 운영(보관/색인/동기화) 관련 변경 단서가 감지되었습니다.
- 노드 설정값/프로토콜 플래그 관련 변경 단서가 감지되었습니다.

## 주요 변경점
- Encrypted transaction support – new header, builder and emitter APIs
- LedgerState race‑condition fix & RocksDB read cache flag change
- Gas version bump to v1.43 and v1.42
- Removal of `move-cli` crate & relocation of shared modules
- Addition of `aptos-batch-encryption` test workflow and pnpm lockfile ignore

## RPC/API 영향
- Add `committed_hash` field to Transaction response
- Remove CryptoHash trait from transaction type
- Introduce encrypted transaction fields (`encryption_key`, `encrypted_payload`) in request/response payloads

## 아카이브 노드 영향
- Storage race‑condition fix may require reindexing of stale nodes
- New tool `check_stale_nodes` added for pruning support
- RocksDB read cache flag change may affect disk usage patterns

## 운영 액션 아이템
- 1. Update node binary to v8.1.0
- 2. Verify encrypted transaction support is enabled in client configs
- 3. Run `check_stale_nodes` to identify stale JMT nodes
- 4. Monitor RocksDB performance metrics after upgrade

## 마이그레이션 체크리스트
- Update Cargo.toml dependencies to new versions
- Adjust API clients for `committed_hash` field and encrypted transaction payloads
- Update storage pruning scripts to use new `check_stale_nodes` tool

## 위험/주의 사항
- 위험 요소 없음

## 근거(Evidence)
- commit e4c00ea67e1a33fc9e77a9a80614a778b58fa5b0 – added encrypted transaction header and builder support
- commit 4e51c8d… – added `committed_hash` to Transaction type and removed CryptoHash trait
- commit 4b5b55347e – updated RocksDB read cache flag to `fill_cache(false)`
- commit 0a04a637ef – added `check_stale_nodes` tool for pruning

## 운영 메모
- 추가 메모 없음

## 원문 커밋 내용
### Commit Log
```text
e4c00ea67e [gas profiler] major UI overhaul (#18690)
eb47704083 [Storage] Fix HotState crash on stale merged_state
a58b0f6b2e [ci] Skip clang install in dev_setup.sh when already present
5869e16dac [execution] Fix executor benchmark: derive timestamps from DB state
370e842928 Fix typo (#18800)
1ac8056fc3 [encrypted mempool] Misc. cleanup of `aptos-batch-encryption` crate (#18796)
fff4e8a248 [storage] Set fill_cache(false) on pruner RocksDB reads
96cd2b3ab1 [Gas] Bump Gas Version to v1.43 (#18794)
9d8653e71f [node] Reduce default thread counts for backup and index-db runtimes
acfb3d2d54 Rust 1.92
bef2812476 [test] Add encrypted transaction decryption smoke test (#18760)
a0c35993e5 [Network] Remove old netbench code.
7c796cc949 Signed integer support in transactional test arguments (#18783)
9b4be1dfdb [compiler-v2] Fix parsing of signed int returns (#18780)
e501527119 [crypto] bump slh_dsa version and fix trait issues (#18787)
c3589bf6b4 fixup! [api][sdk] Add encryption key header, encrypted transaction builder, and emitter support
bfa5a0539d [vm][execution] Support encrypted transaction execution
2284d63ff1 [api][sdk] Add encryption key header, encrypted transaction builder, and emitter support
b0e27875b8 [TSS] add gas profiler support and bump CLI version (#18778)
3f1761500b Make prepare and decrypt work on individual cts (#18786)
70f4ff603e [state-sync] Combine 4 state-sync tokio runtimes into one shared runtime
ef31b3044f [consensus] Propagate SecretSharedKey to consensus observer via PipelinedBlock
f4f33f45d4 [consensus] Add decryption pipeline and secret share management
3ab0c8bed4 [gha][docker] upgrade buildx cli version (#18785)
2b5e710ed6 [vm][genesis][api] Wire encryption key through execution and genesis
efe004ad26 [framework] Add PerEpochEncryptionKey to decryption module
b5101a6b33 [dkg] Derive encryption key from DKG transcript
0530e48a42 [types] Add encrypted transaction types
b535055e55 [types] Refactor DKG output types and add encryption key resource
4b5b55347e [jemalloc] Revamp jemalloc metrics and add HPA stats
fb2d1b124a [storage] Fix HotState race condition via RCU / deferred merge
831c41ea55 [TSS] implement new_block and advance_epoch (#18691)
9dd50444ea crypto native cleanup (#18713)
7d932feb0c [storage] Disable compaction-based write stalling for append-only ledger sub-DBs
b4585e5a5c [Storage] Bump default number of low priority threads to 4
013630546b Increase num orderless txns per user to 5000 (#18769)
4e7ce10777 [Storage] Fix max background job setting
0464815b65 [prover] Remove dead CLI options and flags (#18743)
29bf3480df [vm] Use async type checks as default (#18752)
db3cc03347 [compiler] Remove move-errmapgen crate (#18740)
8e6d2eac02 [storage] Make is_descendant_of check strict by walking the parent chain
223549a489 [vm] Improve type depth tracking and async runtime checks (#18728)
516c64a8ec Redesign PVSS traits (#18718)
5ee5a6f8f8 [abigen] Move move-abigen out of move-prover into move/tools (#18742)
906aaa3392 [encrypted mempool] Update HKDF in `aptos-batch-encryption` to be consistent with RFC-5869 (#18716)
e8678300d0 [tools][cleanup] Move move-docgen out of move-prover into move/tools (#18741)
a818a43233 [stake] Prevent from empty validator set (#18280)
e535ddbda6 [fix] cherry pick missed feature activation times (#18745)
c074ca7d7b [compiler] Remove move-cli crate, relocate shared modules to move-unit-test and move-prover (#18736)
15ce174090 [framework][vm] Add chunky DKG reconfiguration and VM support (#18541)
d8b4266886 Pruned version stream unavailable (#18581)
30ef782792 [encrypted mempool] Switch hash-to-curve implementation in `aptos-batch-encryption` to the ones in `arkworks` and `noble-curves` (#18715)
b24bd9620e Tune jemalloc config to reduce memory fragmentation
87ba2f59b7 Remove the use of mvir files in various places, instead, using masm (#18685)
41d77fb11e remove validations from aptos-trading (#18727)
03b1b6bbe8 [State Sync] Reduce max client transaction and output request sizes.
f49a2ff091 [State Sync] Set default syncing mode to output syncing, and bump limits.
c6d4caf158 [Peer Monitoring] Support metadata sanitization.
0a04a637ef [model] Improve sourcifier spec output formatting (#18579)
479e258d8b [blockstm] pre-write timestamp in mvhashmap (#18125)
f9c780e3fb [consensus] Use OptQuorumStore payload exclusively in proof_manager (#18653)
e2de37b54f [consensus] Use spawn_blocking for CPU-intensive verification tasks
1a3d1566d5 Fix typescript tests flaking (#18696)
ed082258c5 [compiler] Add format string validation for assert macros (#18533)
86b5c582bc [consensus] Add optimistic randomness share verification (#18646)
6da9894f98 [prover] Ensures state labels of behavioral predicates are correctly propagated from the frontend (#18583)
eb53c9e43c [jemalloc] Add background thread for periodic jemalloc stats as Prometheus gauges
a94e31ec6e [move-prover] Implement behavioral predicates in Boogie code generation (#18465)
5ebd78c018 txn emitter: add latency for orderless (#18647)
2b5e4871ec Disable randomness fast path by default (#18644)
b7f57fa94d [storage] Fix incorrect assertion in LedgerState::new
98a531276d Add  fn to batch threshold encryption scheme, to allow validators to post encryption key on-chain at the end of the epoch (#18615)
edd4d7737e Initial attempt (#18714)
0889259cdb Update comments in fk_algorithm.rs to better explain circulant matrix evaluation (#18586)
d9f84d85ac Improve chunky verifier speed (#18700)
d8e7be6de2 Bump CLI to 8.0.0 (#18692)
b1de268070 [Storage] Start a thread to cleanup some stale JMT nodes. (#18688)
2e9b3fba2b [gas] bump gas version to v1.42 (#18704)
095b361b29 [cached-packages] Update head.mrb (#18702)
195056b0eb [framework] Eliminate build.rs from aptos-cached-packages (#18625)
816f71d2d2 [staking_contract] accurate staker and operator pending attributions (#18671)
8b2647ad99 Display compiler errors when framework tests are run (#18693)
8904a2238e [vm] Use Arc<MoveStructLayout> for shared struct layout caching (#18640)
089352a63e [masm] Add native function support for assembler-disassembler roundtripping (#18662)
2e1469016f Improve speed of chunky dealing and serialization (#18611)
6d4a6e3c72 [compiler] remove capture option warning (#18470)
686864870d Update serde-reflection to fixed version
e1814208cf Update Hasura metadata for localnet
24fe7185ab [cli] Update indexer processors to v2.3.0 and SDK to v2.1.4
cb86dd1f77 Use orderless tx on faucet (#18676)
f3d060a615 [types] Add committed_hash() to Transaction and remove CryptoHash trait (#18590)
1c8726e089 [hotfix] Fix closure depth and unwrap in crypto natives (#371) (#18666)
65f281d9ac [voting] fix voting boundary issue (#18680)
2bc647fa85 release builder - add framework release only some packages (#18675)
e44d245a8f [vm] Better stack size checks for unpack and closure calls (#18630)
0b1c672b94 [Storage] Add a tool to check stale nodes that should be pruned but haven't. (#18681)
70fd91f483 [gas profiler] various improments (#18589)
b9a9e62ccd [docker] Split build scripts into 4 parallel builders (#18669)
cc73c23ee7 consensus/execution: perf tuning (#18670)
d5eb55c135 [trivial] Remove unused module (#18663)
ffcb5a7914 Last aptos-trading cleanup pass (#18665)
1fcb6ad84b [cli] Add shorthand flags -y for --assume-yes and -f for --force-restart (#18656)
47f2f40523 [vm] Changing all mvir tests to masm tests for VM transactional tests (#18510)
3eee552ee5 [docker] Migrate from Debian Bullseye to Trixie (#18621)
0482484172 Tune jemalloc configuration for better perf
99e479cc25 stake.move maintenance (#18641)
0d9a150145 [cli] Fix some issues in the CLI with move tooling (#18616)
fe102e7fb8 Reduce number of threads for peer monitoring service
4df75752ee Reduce number of threads for telemetry service
6102e4b5d1 Reduce worker threads for admin service and inspection service
cf49b5470b [gha][docker] upgrade buildx version (#18617)
4dd6f782d4 [gha][docker] use runs-on snapshots for caching (#18606)
efdad231dd Fix imports
f7babb8
```

