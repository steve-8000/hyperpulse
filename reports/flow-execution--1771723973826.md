# Flow(Execution) 운영 리포트

- 생성 시각: 2026-02-22T01:32:53.826Z
- RSS: v0.46.1-experimental-indexer.8
- 비교 기준(Base): 2db95a14348a45a1ce7d2c119be2bc42718cfd80
- 최신 커밋(Head): 1651c1aa13e6d0ddd0fb569b0296963d465bd475

## 한줄 요약
이 릴리즈는 Flow 노드가 계정별 거래 내역과 토큰 전송(FT, NFT) 정보를 조회할 수 있는 API를 추가하고, 기존 거래 인덱싱 로직을 개선한 버전이다.  API 확장은 `GetAccountFungibleTokenTransfers`와 `GetAccountNonFungibleTokenTransfers` 두 개의 엔드포인트를 도입하고, 기존 `GetAccountTransactions` 로직을 보완한다.  이로 인해 인덱서, 스토리지 레이어와 RPC 서버가 새 모듈을 로드해야 하며, 인덱싱 시점에 토큰 전송 이벤트를 별도 파싱한다.  노드 운영자는 인덱서 재구축, 스토리지 확장, API 버전 관리에 주의를 기울여야 한다.

## 운영자 중요 체크
- 외부 API 엔드포인트/버전 관련 변경 단서가 감지되었습니다.
- 아카이브 노드 운영(보관/색인/동기화) 관련 변경 단서가 감지되었습니다.
- 노드 설정값/프로토콜 플래그 관련 변경 단서가 감지되었습니다.

## 주요 변경점
- 1. `access/backends/extended/api.go`에 두 개의 새 메서드 추가
- 2. `backend_account_transfers.go`와 관련 테스트 코드 도입
- 3. 인덱서 모듈(`module/state_synchronization/indexer/extended`)에 FT/NFT 전송 파싱 로직 추가
- 4. 스토리지 인터페이스에 `FungibleTokenTransfersBootstrapper`, `NonFungibleTokenTransfersBootstrapper` 추가

## RPC/API 영향
- {"method":"GetAccountFungibleTokenTransfers","description":"페이지네이션 지원, 필터링 옵션 추가"}
- {"method":"GetAccountNonFungibleTokenTransfers","description":"페이지네이션 지원, 필터링 옵션 추가"}

## 아카이브 노드 영향
- 1. 인덱서가 토큰 전송 이벤트를 파싱하도록 변경되므로, 아카이브 노드(보관 정책)에서 인덱싱 시 추가적인 이벤트 파싱 로직이 필요하다.
- 2. 새 스토리지 인터페이스가 추가되므로, 인덱서가 재시작 시 새 컬렉션을 생성해야 한다.
- 3. 인덱싱 데이터가 커지므로, 디스크 사용량이 증가할 수 있다.

## 운영 액션 아이템
- 1. 인덱서 재시작 시 `account_ft_transfers` 와 `account_nft_transfers` 를 포함한 인덱싱 파이프라인을 재구축한다.
- 2. 스토리지에 새 테이블(또는 컬렉션)을 생성하고, 인덱서가 이를 읽을 수 있도록 설정한다.
- 3. API 엔드포인트를 프로덕션에 배포하기 전 테스트 환경에서 페이지네이션, 필터링, 에러 매핑을 검증한다.

## 마이그레이션 체크리스트
- "인덱서 재시작 전 인덱싱 파이프라인에 새 모듈 추가"
- "스토리지 인터페이스 구현 여부 확인"
- "새 API 엔드포인트 테스트(페이지네이션, 필터링)"
- "인덱서 재시작 시 데이터 마이그레이션 검증"

## 위험/주의 사항
- 1. 인덱서 재구축 시 대용량 데이터 처리로 인한 CPU/메모리 부하
- 2. 신규 API 호출 시 파라미터 검증 실패 시 `codes.InvalidArgument` 반환이 추가되어 클라이언트가 예외 처리 필요
- 3. 인덱싱 로직 변경으로 인해 기존 인덱서가 재시작 시 데이터 손실 가능성
- 4. 신규 이벤트 파싱 로직이 `event slice` 기반으로 바뀌면서 메모리 사용량 증가

## 근거(Evidence)
- {"commit":"1651c1aa13","files":["access/backends/extended/api.go","access/backends/extended/backend_account_transfers.go","module/state_synchronization/indexer/extended/account_ft_transfers.go","module/state_synchronization/indexer/extended/account_nft_transfers.go"]}

## 운영 메모
- 추가 메모 없음

## 원문 커밋 내용
### Commit Log
```text
1651c1aa13 use event slice instead of map
0277bc5492 add missing indexer test utils
0bb545104a update indexes storage to return ErrAlreadyExists for all already processed blocks
75aa715584 cleanup indexer tests
65cd95ca93 switch storage interfaces to use ByAddress
144317c87d improve error handling in the backend
54386a7a49 improve rest api testing
a4cfc55ea8 fix test errors
ebd0eef5eb Merge branch 'peter/account-transactions-api' into peter/account-transfers
eaf927d814 refactor and expand testing
7cc18b3989 Merge branch 'master' into peter/account-transactions-api
fbb308ec64 Merge pull request #8381 from onflow/peter/embedded-indexer
62ad26fee4 move exception handling first in indexNextHeights
8c4cb7baa0 Merge pull request #8418 from onflow/fxamacker/add-evm-wrapper-func
70b114521c Merge pull request #8422 from onflow/tim/run-go1.26-fix
6737724ed4 go fix: remove obsolete +build directives
c5a0b65000 Use geth crypto funcs to encode EVM call signature
f377af77b4 Merge pull request #8420 from onflow/jord/tag-lockctx
f11a22141b pin tagged version of lockctx
f4dfcdf635 Return raw result data if evm call fails
6fc4a4051f Remove a commented out line and fix existing nit
68fe55b2d3 Merge branch 'master' into fxamacker/add-evm-wrapper-func
2f7c74ed4b Merge branch 'peter/account-transactions-api' into peter/account-transfers
460d20bcfd Merge branch 'peter/account-transactions-api' into peter/account-transfers
3652635fb5 [Access] Add experimental account transfers rest API
aa36586ae0 Update test fixture
646eca3d27 Lint
f7f9e7b1e8 Add sanity check in encodeABIWithSigAndArgs
c7fb9df471 Lint
16120e2f7e Add 3 new EVM functions to optimize call and dryCall
```

