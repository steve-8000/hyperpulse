# Kaia (Klaytn) 운영 리포트

- 생성 시각: 2026-02-22T01:36:14.473Z
- RSS: v2.2.1-rc.1: Merge pull request #730 from blukat29/version-v2.2.1
- 비교 기준(Base): 7ed3b19edb7091de7b3e49008d7431533ada0a17
- 최신 커밋(Head): c26bba73a086d507775df141ae7d53a37260315a

## 한줄 요약
본 릴리즈는 Kaia 체인의 Osaka(버전 2.2.1) 기능을 도입하면서, RPC/헤더 구조와 가스 리미트 검증 로직에 변화를 주었다. 주요 변경사항은 헤더에 `excessBlobGas`와 `blobGasUsed` 필드를 추가하고, 가스 리미트 검증 시 상위 한계(`UpperGasLimit`)를 명시적으로 체크하도록 수정한 점이다. 이로 인해 노드 운영자는 가스 리미트 설정과 아카이브 저장 구조를 재검토해야 한다.

## 운영자 중요 체크
- RPC/JSON-RPC 관련 변경 단서가 감지되었습니다.
- 외부 API 엔드포인트/버전 관련 변경 단서가 감지되었습니다.
- 아카이브 노드 운영(보관/색인/동기화) 관련 변경 단서가 감지되었습니다.
- 노드 설정값/프로토콜 플래그 관련 변경 단서가 감지되었습니다.

## 주요 변경점
- 주요 변경점 없음

## RPC/API 영향
- 해당 사항 없음

## 아카이브 노드 영향
- 아카이브 노드가 블록 헤더를 저장할 때 `excessBlobGas`와 `blobGasUsed` 필드를 무시하면, 이후에 블록 분석이 어려워질 수 있다. 따라서 스키마를 업데이트하고 인덱스에 필드가 포함되었는지 확인해야 한다.
- forkid 매핑이 211090000(Osaka) 블록을 포함하도록 업데이트되었으므로, 아카이브 노드가 최신 forkid를 인식하도록 재배포 필요.

## 운영 액션 아이템
- 노드 실행 시 `--rpc.gascap` 옵션이 UpperGasLimit(기본 0x1dcd6500) 이하로 설정되었는지 확인
- 아카이브 노드가 새 필드를 저장하도록 스키마를 업데이트
- 클라이언트/노드가 `excessBlobGas`와 `blobGasUsed`를 파싱하도록 로직을 추가
- 가스 리미트 초과 시 에러 메시지(`tx gas limit exceeds the upper limit`)를 모니터링

## 마이그레이션 체크리스트
- 가스 리미트 검증 로직이 변경된 점을 테스트
- 헤더 필드 추가에 대한 JSON-RPC 스키마 검토 및 클라이언트 업데이트
- forkid 매핑이 211090000(Osaka) 블록을 포함하도록 업데이트
- 아카이브 노드 스키마에 `excessBlobGas`, `blobGasUsed` 필드를 추가
- 노드 설정(`--rpc.gascap`)이 UpperGasLimit 이하인지 확인

## 위험/주의 사항
- 가스 리미트 검증 로직이 변경되어, 기존에 `gasLimit`을 초과하는 트랜잭션이 더 엄격히 거부된다. 이는 기존 클라이언트가 가스 리미트를 0xE8D4A50FFF(≈ 3.5B)에서 0x1DCD6500(≈ 500M)으로 바뀌면서, 일부 테스트넷/메인넷에서 가스 리미트가 낮아지는 상황을 초래할 수 있다.
- 헤더에 추가된 `excessBlobGas`와 `blobGasUsed` 필드가 없던 클라이언트는 JSON-RPC 응답을 파싱할 때 오류를 발생시킬 수 있다.
- 아카이브 노드가 블록 헤더를 저장할 때 새로운 필드를 무시하면, 이후에 `excessBlobGas`/`blobGasUsed`를 활용한 분석이 불가능해질 수 있다.

## 근거(Evidence)
- 근거 데이터 없음

## 운영 메모
- Osaka가 도입되면서 블록 헤더에 `excessBlobGas`와 `blobGasUsed` 필드가 추가되었다. 이 필드는 클라이언트가 파싱할 때 반드시 지원해야 하며, 아카이브 노드에서도 저장 시 필수값으로 인식하도록 설정해야 한다.
- 가스 리미트 검증 로직이 `params.UpperGasLimit`을 기준으로 상위 한계를 명시적으로 체크하도록 변경되었다. 이는 `--rpc.gascap` 옵션이 설정된 경우에도 가스 리미트가 상위 한계보다 높을 시 에러를 반환한다.
- 테스트 케이스가 추가되었으며, forkid 매핑이 211090000(Osaka) 블록으로 확장되었다. 이는 메인넷에서 211090000 이후부터 적용된다.

## 원문 커밋 내용
### Commit Log
```text
c26bba73 Merge pull request #730 from blukat29/version-v2.2.1
27a99f7a Merge pull request #742 from yoomee1313/feat/tx-gas-limit-check
07c9548d Merge pull request #746 from changgesi/dev
691461dc forkid: Fix tests
abefa745 remove redundant
dd10ca7d params: Set Mainnet OsakaOsakaCompatibleBlock
56c798c8 chore: fix a large number of spelling issues
69845630 fix tests
4e879b09 fix tests
f2f46df5 clamp globalGasCap to UpperGasLimit in ToMessage
c76fb93c tx_pool: add sanity check
307e8725 Merge pull request #739 from blukat29/rename-vrank-metrics
0733b6ce Merge pull request #732 from Olexandr88/dev
bd871a1c consensus: Rename Vrank metrics
9fa68d54 Merge pull request #736 from ian0371/api-add-osaka-fields
8d084607 Run gencodec
6ff0fca3 Add Osaka fields to kaia_ header API
273547d1 chore: go mod tidy
d2221c76 Merge pull request #727 from blukat29/ecies-oob
6cee0ef5 Merge pull request #726 from blukat29/p2p-txmsg-kzg
d5c1d8d8 Merge pull request #731 from kaiachain/fix/release-workflow-slack-env
f40c70d8 ci: add SLACK_WEBHOOK_URL env to update-repo-metadata job
12016c84 params: Set version to v2.2.1
ec2478a6 Merge pull request #728 from kaiachain/fix-gh-action
69ed7876 Merge pull request #723 from slightsharp/dev
c2e5875b remove PAT
b7b9ec97 p2p: Early terminate on bad KZG TxMsg
e9575eb4 crypto/ecies: accept padded ciphertext
2ca57ae0 refactor: use the built-in max/min to simplify the code
```

