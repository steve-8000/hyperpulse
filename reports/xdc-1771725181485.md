# XDC 운영 리포트

- 생성 시각: 2026-02-22T01:53:01.485Z
- RSS: v1.0.0
- 비교 기준(Base): cfce9a6ac7d04a9ed40543b817df01c53f6e5297
- 최신 커밋(Head): d2b637afb9fc69c1935cd1befad01ba711012fc1

## 한줄 요약
이번 릴리즈(버전 v1.0.0)는 주로 서브넷 배포 도구와 Docker 이미지 버전을 업그레이드한 내용이다. 핵심 변경은 서브넷 생성 스크립트가 기존 `generate.sh`에서 다수의 새 스크립트(`check-mining.sh`, `check-peer.sh`, `csc.sh` 등)와 UI 스크립트(`ui.js`)로 대체되었으며, 메인넷용 `docker-compose.yml`이 이미지 버전을 **v2.2.4** 로 바뀐 점이다. 이로 인해 기존 배포 파이프라인을 재구성해야 할 필요가 있다.

## 운영자 중요 체크
- 아카이브 노드 운영(보관/색인/동기화) 관련 변경 단서가 감지되었습니다.
- 노드 설정값/프로토콜 플래그 관련 변경 단서가 감지되었습니다.

## 주요 변경점
- 새 이미지에 맞춰 컨테이너 실행 시 환경 변수(`NETWORK=mainnet`)가 추가되었으며, `start-node.sh` 경로가 `/work/start.sh` 로 바뀐.
- 스크립트 실행 시 `scripts` 폴더가 컨테이너 내부에 존재해야 함.
- UI 서버가 컨테이너 내부에서 바로 시작되며, 기존 `gen.js` 호출은 주석 처리.
- 기존 배포 스크립트가 사라져 새 스크립트(`check-mining.sh`, `docker-up.sh` 등) 로 교체.

## RPC/API 영향
- 해당 사항 없음

## 아카이브 노드 영향
- 아카이브 노드가 새 이미지(`v2.2.4`) 를 사용하도록 설정 변경되었으므로, 기존 `docker-compose.yml` 의 이미지 태그를 업데이트해야 함.
- 기존 `upgrade.sh` 가 새 이미지를 pull하도록 수정되었으나, 아카이브 노드가 `upgrade.sh` 를 직접 실행하지 않더라도 이미지 버전 차이로 인한 재배포가 필요할 수 있음.

## 운영 액션 아이템
- 이미지 버전이 바뀐 만큼 `docker-compose.yml` 과 `upgrade.sh` 를 최신 상태로 업데이트.
- 서브넷 생성 스크립트(`scripts/`) 가 정상 동작하는지 로컬 테스트 후 배포.
- UI 스크립트가 컨테이너 내부에서 바로 실행되므로, 외부 포트(예: 8080)가 노출되는지 확인.
- 기존 `generate.sh` 가 삭제되었으므로, 필요 시 새 스크립트(`docker-up.sh`, `docker-down.sh`) 를 활용해 컨테이너를 재시작.
- 아카이브 노드가 새 이미지에 맞춰 `docker-compose.yml` 을 재구성하고, `upgrade.sh` 를 실행해 이미지 업데이트를 수행.

## 마이그레이션 체크리스트
- 1. `docker-compose.yml` 의 이미지 태그를 `v2.2.4` 로 변경.
- 2. `upgrade.sh` 에서 `docker pull` 명령이 새 이미지로 바뀐지 확인.
- 3. 서브넷 생성 스크립트(`scripts/`) 가 정상 동작하는지 로컬 테스트.
- 4. UI 포트가 외부에 노출되는지 확인(필요 시 방화벽 설정).
- 5. 아카이브 노드가 새 이미지에 맞춰 재배포(또는 수동 업데이트) 여부 검증.
- 6. JSON‑RPC 엔드포인트(예: `eth_blockNumber`) 가 정상 동작하는지 테스트.
- 7. 기존 배포 파이프라인(`make deploy`) 을 새 스크립트 구조에 맞춰 재구성.

## 위험/주의 사항
- 기존 `generate.sh` 스크립트가 삭제되고 새 스크립트 구조로 교체되면서 기존 배포 자동화 스크립트가 동작하지 않을 수 있다.
- Docker 이미지 버전이 `v1.6.0` → `v2.2.4` 로 바뀐 만큼, 이미지 내부 구조(컨테이너 설정, 환경 변수)가 변경되었을 가능성이 있어 기존 컨피그 파일(`docker.env`, `genesis.json`)과 호환성 검증이 필요하다.
- `upgrade.sh` 에서 `docker pull xinfinorg/xdposchain:v2.2.4` 로 바뀐 만큼, 이미지에 포함된 바이너리 버전이 1.x에서 2.x 로 변경되었으므로, RPC/JSON‑RPC 엔드포인트가 변동될 가능성이 있다. 현재는 명시적 변경이 없으나, 테스트 단계에서 확인 필요.

## 근거(Evidence)
- Subnetwork Generator V1 with UI (#155)
- Update docker-compose image tag from v1.6.0 to v2.2.4
- mainnet 2.0.0 (#151)
- Update upgrade.sh
- Remove old generate.sh and add new scripts

## 운영 메모
- 서브넷 생성 도구가 `scripts` 디렉터리 구조를 재배치했으므로, 기존 배포 파이프라인(예: `make deploy`)을 재검토해야 함.
- `upgrade.sh` 에서 이미지 버전이 바뀐 만큼, `docker-compose.yml` 의 `image:` 라인과 `upgrade.sh` 에서 `docker pull` 명령이 일치하도록 확인 필요.
- 기존 `generate.sh` 가 삭제되었으므로, 새 스크립트(`docker-up.sh`, `docker-down.sh`) 가 정상 동작하는지 테스트 필요.
- UI 스크립트가 컨테이너 내부에서 바로 실행되므로, UI 포트(예: 8080)가 외부에 노출되는지 확인.

## 원문 커밋 내용
### Commit Log
```text
d2b637a Subnet Generator V1 with UI (#155)
524d0fd Update upgrade.sh
af74c0b bump to v2.2.4 to reduce timeout (#160)
570e16d update version
57c9058 bump to v2.2.2 for message optimization
920cf14 bump to v2.2.1 (#158)
1ca65f5 update mainnet to v2.2.0 (#157)
36dd2c7 patch to v2.1.1 (#156)
769d463 Update README.md
fb59869 Update env.example
996c7c1 testnet release 2.4.0-beta1 (#154)
f4741b4 Update upgrade.sh
ccc07de map start-apothem.sh as work/start.sh for mainnet (#153)
96a2453 Update start-apothem.sh
5f720bd mainnet 2.0.0 (#151)
```

