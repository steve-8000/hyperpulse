# Solana(Agave) 운영 리포트

- 생성 시각: 2026-02-22T01:46:02.410Z
- RSS: Release v3.1.9
- 비교 기준(Base): 2717084afeeb7baad4342468c27f528ef617a3cf
- 최신 커밋(Head): 765ee54adc4f574b1cd4f03a5500bf46c0af0817

## 한줄 요약
이번 릴리즈(버전 3.1.9)는 주로 내부 구조 개선과 성능 최적화에 초점을 두고 있습니다. 핵심 변경 사항은 중간 누산 경로를 제거한 consensus 로직, transaction context 메모리 레이아웃 교체, accounts‑db LRU 샘플링 방식 변경 등이며, 외부 API(특히 JSON‑RPC)에는 직접적인 변동이 없습니다. 다만 내부 구현에 대한 변경은 노드 운영자에게는 몇 가지 주의 사항이 존재합니다.

## 운영자 중요 체크
- 아카이브 노드 운영(보관/색인/동기화) 관련 변경 단서가 감지되었습니다.
- 노드 설정값/프로토콜 플래그 관련 변경 단서가 감지되었습니다.

## 주요 변경점
- 주요 변경점 없음

## RPC/API 영향
- 해당 사항 없음

## 아카이브 노드 영향
- accounts-db LRU 샘플링 변경으로 read‑only cache lock 경합이 감소해, 아카이브 노드의 메모리 사용량은 소폭 증가할 수 있으나, 큰 영향 없음. transaction_context 구조 변경이 아카이브 노드에 직접적인 영향은 없음.

## 운영 액션 아이템
- 1. 최신 버전으로 빌드 후 테스트 환경에서 `transaction_context` 메모리 레이아웃 변동을 확인. 2. accounts‑db 캐시 설정(`max_cache_size`, `lru_eviction_ratio`)을 모니터링. 3. sigverify 채널 크기(`max_packet_limit`)를 조정해 패킷 처리량을 모니터링. 4. vote_storage epoch 필터링 로직이 정상 동작하는지 검증.

## 마이그레이션 체크리스트
- 1. 소스코드 최신화(3.1.9) 후 `Cargo.lock`/`Cargo.toml` 버전 업데이트 확인. 2. `transaction_context` 구조 변경에 따른 빌드 테스트(특히 플러그인). 3. accounts‑db LRU 샘플링 설정 검증(메모리 사용량). 4. sigverify 채널 크기 조정 테스트. 5. vote_storage epoch 필터링 로직 검증. 6. 전체 노드 테스트(통합).

## 위험/주의 사항
- 위험 요소 없음

## 근거(Evidence)
- 근거 데이터 없음

## 운영 메모
- `Box<[UnsafeCell<ITEM>]>` 로 교체하면서 내부 포인터 연산이 바뀜. 기존에 `transaction_context` 를 직접 참조하던 플러그인에서 포인터 연산이 필요할 경우, 메모리 할당 패턴이 바뀜. 이로 인한 성능 저하가 발생할 수 있음.
- `SmallRng` 도입으로 캐시 교체 로직이 바뀜. 오래된 노드에서 메모리 사용량이 급증할 수 있음.
- 채널 크기 조정으로 패킷 처리량이 증가할 수 있으나, 과도한 채널 사용은 CPU 오버헤드를 유발.
- 권한 투표자 필터가 바뀜. 잘못된 epoch 값이 들어오면 부적한 투표를 거부할 수 있음.

## 원문 커밋 내용
### Commit Log
```text
765ee54adc v3.1: consensus: axe the intermediate accumulation pathway for OC (backport of #10594) (#10697)
ba0d1f8b10 v3.1: Switch from `UnsafeCell<Box<[ITEM]>>` to `Box<[UnsafeCell<ITEM>]>` in transaction context (backport of #10524) (#10556)
7018f4aaba v3.1: accounts-db: Use `SmallRng` for LRU eviction sampling (backport of #10640) (#10644)
e9b827f57b v3.1: accounts-db: Reduce read-only cache lock contention (backport of #10641) (#10645)
eed17d618c v3.1: Sigverify - receive loop up to packet limit (backport of #10428) (#10521)
46a35ec1b6 v3.1: streamer/sigverify: use bounded channels between streamers and sigver (backport of #9732) (#10551)
2941257047 v3.1: bug: use try_send in handle_forwarded_packets (backport of #10498) (#10552)
d11da4c2ab v3.1: vote_storage: use the correct epoch to filter authorized voter (backport of #10522) (#10537)
01a77c78d0 v3.1: ignore RUSTSEC-2026-0009 (#10526)
5dcb50f33b v3.1: ci: move all agents to use the default queue (backport of #10330) (#10370)
badf555942 V3.1 ignore byte audit (#10391)
fbeb542e41 Bump version to v3.1.9 (#10187)
```

