# Initia 운영 리포트

- 생성 시각: 2026-02-22T01:34:07.030Z
- RSS: v1.3.0: feat: prepare upgrade (#468)
- 비교 기준(Base): d508c78d1693e8b548cbc4bd44d0bb9cc3b42d24
- 최신 커밋(Head): e20ea30f42e6dae4a1ebe62aa273f1a2c4383687

## 한줄 요약
v1.3.0 릴리즈는 IBC‑Hook 기능을 대폭 리팩토링하고, JSON 실행 지원과 쿼리 허용 리스트를 추가한 버전입니다. 핵심 변경은 `x/ibc‑hooks` 모듈에 대한 재구성이며, 이로 인해 노드가 IBC 메시지 처리 로직을 새롭게 호출하도록 변경됩니다. 이 업데이트는 기존 RPC/JSON‑RPC 인터페이스에는 직접적인 변동이 없으나, IBC 메시지 처리 로직에 대한 내부 구조가 바뀌어 노드 재시작 시점이 필요합니다.  

## 운영자 중요 체크
- 아카이브 노드 운영(보관/색인/동기화) 관련 변경 단서가 감지되었습니다.
- 노드 설정값/프로토콜 플래그 관련 변경 단서가 감지되었습니다.

## 주요 변경점
- 주요 변경점 없음

## RPC/API 영향
- 해당 사항 없음

## 아카이브 노드 영향
- 아카이브 노드가 `app/keepers/query_whitelist.go` 를 통해 쿼리 허용 리스트를 저장하므로, 기존 데이터베이스에 대한 마이그레이션 필요
- `app/upgrades/v1_3_0/upgrade.go` 가 실행되면 기존 쿼리 허용 리스트가 새 포맷으로 변환되어야 함
- 아카이브 노드 재시작 시 `vm_custom_query` 로직이 정상 동작하도록, 최신 버전의 바이너리 파일(`x/move/keeper/binaries/*.mv`) 이 로드되도록 설정 필요

## 운영 액션 아이템
- `app/upgrades/v1_3_0/upgrade.go` 를 실행해 쿼리 허용 리스트를 초기화하고, `app/keepers/query_whitelist.go` 를 통해 쿼리 허용 리스트를 재구성
- `x/ibc-hooks/move‑hooks/integration_test.go` 를 실행해 IBC 메시지 처리 로직이 정상 동작하는지 검증
- `cmd/move/deploy.go` 에서 `--json-exec` 플래그가 활성화 되어 있는지 확인

## 마이그레이션 체크리스트
- 업그레이드 스크립트 실행 여부
- 쿼리 허용 리스트 마이그레이션
- IBC Hook 로직 테스트
- JSON 실행 허용 플래그 검증

## 위험/주의 사항
- IBC 메시지 처리 로직이 새로 리팩토링되어 기존 IBC 모듈과의 호환성 이슈 발생 가능
- 새로운 `vm_custom_query` 로직이 추가되어 쿼리 API가 변동될 수 있음
- 업그레이드 시 `app/upgrades/v1_3_0/upgrade.go` 에 포함된 마이그레이션 로직이 정상 동작하지 않을 경우, 기존 상태를 복구할 수 없는 상황 발생 가능

## 근거(Evidence)
- feat: prepare upgrade (#468)
- feat: allow json execution at ibc move hook (#459)

## 운영 메모
- IBC Hook 로직이 새로 리팩토링되었으나, 기존 IBC 모듈과의 인터페이스는 동일하지만 내부 구현이 바뀌어 테스트 커버리지를 충분히 확보해야 함
- `vm_custom_query.go` 가 추가되면서 쿼리 API가 새로 도입되었으나, 현재는 `QueryIbcHook` 이라는 쿼리 이름으로만 동작하도록 설계되어 있음
- Dockerfile, workflow 파일에 `permissions: contents: read` 가 추가되었으나 이는 CI/Build 환경에 대한 설정이며, 노드 운영에는 영향이 없음

## 원문 커밋 내용
### Commit Log
```text
e20ea30 feat: prepare upgrade (#468)
539ad83 fix to decorater to register proper allowed messages (#467)
d3557bd bump movevm to latest (#465)
16a7f29 add workflow permissions (#463)
e2cc3f4 bump cometbft
5462e47 fix docker build (#462)
e6b07fe [skip-ci] chores: fix ci
be8dd8a feat: ibc hook refactor (#461)
bf0478e feat: update pulsar api files (#460)
1168ae6 !feat: allow json execution at ibc move hook (#459)
```

